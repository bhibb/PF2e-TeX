%\RequirePackage{longtable}
% \RequirePackage{supertabular}
% \usepackage{tabu} %% this is broken, don't use until it is fixed
% \usepackage{booktabs}
\usepackage[table]{xcolor}
\usepackage{tabularx}
\usepackage{array}
\usepackage{caption}

% Table Header
\newcommand{\tableheader}[1]{{
  \par\vspace*{8pt}
  \noindent
  \pfTableTitleFont
  #1}}

\newcommand{\header}[1]{%
  \textbf{\cellcolor{tabletitlebg}\color{tabletitlefg}{#1}}%
}

% Centered Column
\newcolumntype{Y}{>{\centering\arraybackslash}X}

% Table Environment
\newenvironment{pf-table}[1][lX]{
  \par\vspace*{8pt}
  \noindent
  \pfTableBodyFont
  \rowcolors{1}{tablecolor2}{tablecolor1} % Alternate colors
  \tabularx{\linewidth}{#1}
}{
  \endtabularx
  \vspace{8pt plus 1pt}
  \noindent
}

\newenvironment{pf-table*}[1][lX]{
  \table
  \noindent
  \pfTableBodyFont
  \rowcolors{1}{tablecolor2}{tablecolor1} % Alternate colors
  \tabularx{\textwidth}{#1}
}{
  \endtabularx
  \endtable
}

% Table Environment
\newenvironment{pf-table2}[1][lX]{
    \par\vspace*{8pt}
    \noindent
    \fontfamily{lmss}\selectfont %Select font
    \rowcolors{1}{tablecolor2}{tablecolor1} % Alternate colors
    \tabularx{\linewidth}{#1}
}
{
    \endtabularx
    \vspace{8pt plus 1pt}
    \noindent
}

% Long Table Environment
% \newenvironment{pf-longtable}[1][lX]{
%     \par\vspace*{8pt}
%     \noindent
%     \pfTableBodyFont
%     \rowcolors{1}{tablecolor2}{tablecolor1} % Alternate colors
%     \supertabular{#1}
% }{
%     \endsupertabular
%     \vspace{8pt plus 1pt}
%     \noindent
% }

\newenvironment{pf-weapontable-tabu}{
    % \par\vspace*{8pt}
    % \noindent

    % \begin{table*}[t]
    \centering
    \fontfamily{lmss}\selectfont %Select font
    % \rowcolors{1}{lightgray}{} % Alternate colors

    \tabu to \textwidth {l|c|c|c|c|c|X}
    \taburowcolors[2]2{green!30 .. yellow!40}
    \rowfont{\bfseries\large}\rowcolor{gray!25} Weapon  & Price & Damage & Bulk & Hands & Group & Weapon Traits \\
    \hline
}
{
    % \vspace{8pt plus 1pt}
    % \noindent
    \endtabu
    % \end{table*}
}

\DeclareCaptionFont{pf@CaptionFont}{\pfStatBlockTitleFont}

\newenvironment{pf-weapontable}[1]{
  \table
  \noindent

  \captionsetup{margin=0pt,
                justification=raggedright,
                format=plain,
                singlelinecheck=false,
                font={pf@CaptionFont,
                  color=tablecaption}}
  \caption{#1}

  \pfTableBodyFont
  \rowcolors{1}{tablecolor2}{tablecolor1} % Alternate colors

  \tabularx{\textwidth}{l|c|c|c|c|c|X}
  \header{Weapon} & \header{Price} & \header{Damage} & \header{Bulk} & \header{Hands} & \header{Group} & \header{Weapon Traits} \\
}
{
  \endtabularx
  \endtable
}
